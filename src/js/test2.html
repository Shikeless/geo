<!-- <!DOCTYPE html>
<html>
<head>
	<title></title>
	<style>
		
	</style>
</head>
<body class="container">
	<div id="pos" class="div">test</div>
	<script>


		window.addEventListener("click", e => {
 			var posx;
   		 	var posy;
    		if (!e) var e = window.event;
    		if (e.pageX || e.pageY) {
		        posx = e.pageX;
		        posy = e.pageY;
	        } else if (e.clientX || e.clientY) {
		        posx = e.clientX;
		        posy = e.clientY;
    		}
    		console.log(posx);
 			console.log(posy);
 			var div = document.getElementById("pos");
 			div.className = 'div';
 			div.style.left = posx;
 			div.style.top = posy;
 			div.style.display= 'block';
 			console.log(div);

		});
</script>
	
</body>
</html> -->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>Aratti@py</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/handlebars.js/4.1.2/handlebars.min.js"></script>
 <style>
 		html *
		{
   			font-family: Arial;
		}

 		.card {
			background-color: white;
			height: 530px;
  			width: 380px;
			border-radius: 5px; 
			position: absolute;
			border: 1px solid grey;
			display: none;
		}

		h3 {
			transform: translateY(-40px); color: #f48c42
		}

		h4 {
			background-color: #f48c42;
			padding: 8px 10px;
			border-radius: 5px 5px 0 0;
			white-space: nowrap;
    		overflow: hidden;
			text-overflow: ellipsis;
			color: white;
			transform: translateY(-22px);
		}

		.container {
			padding: 8px 10px;
		}

		.com-box {
			height: 200px;
  			width: 350px;
  			padding: 8px 10px;
			overflow: auto;
			transform: translateY(-40px);
		}

		.button {
			background-color: #f48c42;
			border: none;
			border-radius: 5px;
			color: white;
			padding: 8px 12px;
			text-align: center;
			text-decoration: none;
			outline:none;
			display: inline-block;
			font-size: 16px;
		}

		.button:active {
			outline:none;
			border: none;
            transform: translateY(1px);
        }

        input {
  			height: 30px;
  			width: 360px;
  			margin-bottom: 5px;
  			padding: 8px 10px;
  			border: 1px solid grey;
  			border-radius: 10px;
			overflow: auto;
			outline: none;
			transform: translateY(-50px);
		}

		textarea {
			resize: none;
			width: 360px;
			height: 120px;
			border-radius: 10px;
			padding: 8px 10px;
			outline:none;
			transform: translateY(-50px)
		}

		/* width */
		::-webkit-scrollbar {
 			width: 10px;
		}

		/* Track */
		::-webkit-scrollbar-track {
		  	background: #f1f1f1; 
		}
 
		/* Handle */
		::-webkit-scrollbar-thumb {
		  	background: #888; 
		}

		/* Handle on hover */
		::-webkit-scrollbar-thumb:hover {
		  	background: #555; 
		}

		.place {
			overflow: hidden;
			text-overflow: ellipsis;
		}
	</style>

 
</head>
 
<body id="pa" onClick="checkS(event)">


 	<div id="pos" class="card">
  		<h4 id="header"></h4>
  		<div class="container">
	  		<div id="com-box" class="com-box">			
	  		</div>
	  		<h3>ВАШ ОТЗЫВ</h3>
	    	<input id="name" type="text" name="name" placeholder="Введите имя">
	    	<input id="place" type="text" name="place" placeholder="Введите название места">
	    	<textarea id="comment" type="text" name="comment" placeholder="Оставьте свой коментарий"></textarea>
    		<div align="right" style="transform: translateY(-45px);">
    			<button id="addButton" class="button">Добавить</button>
    		</div>
    	</div>
    </div>

    <script id="entry-template" type="text/x-handlebars-template">  
		{{#each list}}
		<div id="friends">
			<p><b>{{name}}</b> <span class="place">{{place}}</span> {{timestamp}}</br>{{comment}}</p>
		</div>				
		{{/each}}
	</script>
	
	<script>
		var body = document.querySelector("#pa")
		function creating() {
			var pos = document.createElement('div')
			pos.id = "pos";
			pos.classList = "card"
			var h4 = document.createElement('h4')
			h4.id = "header";
			var container = document.createElement('div')
			container.classList = "container";
			var comBox = document.createElement('div');
			comBox.id = "com-box";
			comBox.classList = "com-box";
			var h3 = document.createElement('h3');
			h3.innerHTML = "ВАШ ОТЗЫВ"
			var nameInput = document.createElement('input');
			nameInput.id = "name";
			nameInput.type = "text";
			nameInput.name= "name";
			nameInput.placeholder = "Введите имя";
			var placeInput = document.createElement('input');
			placeInput.id = "place";
			placeInput.type = "text";
			placeInput.name= "place";
			placeInput.placeholder = "Введите название места";
			var comment = document.createElement('textarea');
			comment.id = "comment";
			comment.type = "text";
			comment.name= "comment";
			comment.placeholder = "Оставьте свой коментарий";
			var addDiv = document.createElement('div');
			addDiv.align = "right";
			addDiv.style = "transform: translateY(-45px);"
			var but = document.createElement('button');
			but.id = "addButton";
			but.classList = "button";
			but.textContent = "Добавить"
			pos.appendChild(h4);
			pos.appendChild(container);
			container.appendChild(comBox);
			container.appendChild(h3);
			container.appendChild(nameInput);
			container.appendChild(placeInput);
			container.appendChild(comment);
			container.appendChild(addDiv);
			addDiv.appendChild(but);
			pa.appendChild(pos);


		}
		creating();








		const data = {
			list: []
		};
 
		function checkS(e){
    		if (e.target.localName === "body") {
    			console.log(window.innerWidth);
    			console.log(window.innerHeight);

    			var source = document.getElementById("entry-template").innerHTML; //определяем шаблон как переменную
    			
				var template = Handlebars.compile(source);  //компилируем шаблон
				var html = template(data);
				const comBox = document.querySelector('#com-box')
				
    			if (e.clientY + document.getElementById('pos').offsetHeight > window.innerHeight) {
    				document.getElementById('pos').style.top = window.innerHeight - document.getElementById('pos').offsetHeight;
    			} else {
    				document.getElementById('pos').style.top = e.clientY
    			}
				
				if (e.clientX + document.getElementById('pos').offsetWidth > window.innerWidth) {
    				document.getElementById('pos').style.left = window.innerWidth - document.getElementById('pos').offsetWidth;
    			} else {
    				document.getElementById('pos').style.left = e.clientX;
    			}
				
				
				document.getElementById('pos').style.display='block';
				comBox.innerHTML = `${window.innerWidth}, ${window.innerHeight}, ${document.getElementById('pos').offsetWidth}, ${document.getElementById('pos').offsetHeight}, ${window.innerHeight - document.getElementById('pos').offsetHeight}`;
			}
		}

		function GetFormattedDate() {
		    var todayTime = new Date();
		    var month = todayTime .getMonth() + 1;
		    var day = todayTime .getDate();
		    var year = todayTime .getFullYear();
		    var hour = todayTime .getHours();
		    var minute = todayTime .getMinutes();
		    return year + "/" + month + "/" + day + "-" + hour + "." + minute;
		}

		var but = document.querySelector('#addButton');

		but.addEventListener('click', e => {
			var header = document.querySelector('#header')
			var name = document.querySelector('#name')

			var place = document.querySelector('#place')
	
			var comment  = document.querySelector('#comment')

			var obj = {};
			obj.header = "Adreeeeeeeeeeeeeeeeees";
			obj.name = name.value;
			obj.place = place.value;
			obj.comment = comment.value;
			obj.timestamp = GetFormattedDate();
			name.value = '';
			place.value = '';
			comment.value = '';
			data.list.push(obj);
		
		});

</script>
</html>